---
// Icon.astro - MOBILE FIRST ONLY
export interface Props {
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
  color?: 'primary' | 'secondary' | 'highlight' | 'light' | 'mono-white' | 'mono-black';
  class?: string;
}

const { 
  size = 'sm', // Taille par défaut mobile
  color = 'light',
  class: className = '',
  ...props 
} = Astro.props;

const getSizeValue = (size: string): string => {
  const sizeMap: Record<string, string> = {
    'xs': 'var(--logo-size-xs)',    // 20px
    'sm': 'var(--logo-size-sm)',    // 28px
    'md': 'var(--logo-size-md)',    // 36px
    'lg': 'var(--logo-size-lg)',    // 48px
    'xl': 'var(--logo-size-xl)',    // 64px
  };
  return sizeMap[size] || sizeMap.sm;
};

const getColorValue = (color: string): string => {
  const colorMap: Record<string, string> = {
    'primary': 'var(--color-primary)',
    'secondary': 'var(--color-secondary)',
    'highlight': 'var(--color-highlight)',
    'light': 'var(--color-neutral-lighter)',
    'mono-white': '#FFFFFF',
    'mono-black': '#000000'
  };
  return colorMap[color] || colorMap.light;
};

const sizeValue = getSizeValue(size);
const colorValue = getColorValue(color);
---

<svg
  viewBox="0 0 2279 1598"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  class={`icon ${className}`}
  role="img"
  aria-label="Terre Digitale"
  style={`width: ${sizeValue}; height: ${sizeValue};`}
  {...props}
>
  <path 
    class={`icon-path icon-color-${color}`}
    d="M2278.37 444.617L949.967 1211.57L949.408 1210.6L948.599 1211.07L972.599 1252.64L1838.97 752.44C1884.75 1042.37 1751.92 1343.59 1482.53 1499.12C1140.58 1696.55 705.348 1586.06 497.902 1253.68L1761.33 521.895C1784.6 565.327 1803.04 610.132 1816.81 655.672L2254.37 403.048L2278.37 444.617ZM2034.16 41.5684L705.761 808.521L705.418 807.929L704.391 808.522L728.391 850.092L1619.33 335.71C1652.96 367.546 1683.93 402.967 1711.62 441.812L1951.99 303.031L1975.99 344.601L622.608 1125.98L473.814 1212.16C473.777 1212.09 473.739 1212.02 473.701 1211.95L24 1471.58L0 1430.02L452.328 1168.86C297.996 830.45 423.389 423.761 752.098 233.98C1007.5 86.5249 1314.93 110.842 1540.63 271.082L2010.16 0L2034.16 41.5684Z"
    fill={colorValue}
  />
</svg>

<style>
  /* ================================
   * ICON - MOBILE OPTIMIZED
   * ================================ */
  
  .icon {
    display: block;
    flex-shrink: 0;
  }

  .icon-path {
    transition: var(--transition-colors);
  }

  /* Couleurs par défaut */
  .icon-color-light path {
    fill: var(--color-neutral-lighter);
  }

  .icon-color-secondary path {
    fill: var(--color-secondary);
  }

  .icon-color-primary path {
    fill: var(--color-primary);
  }

  .icon-color-highlight path {
    fill: var(--color-highlight);
  }

  /* États pour l'icône */
  .icon.menu-open .icon-path,
  .icon.menu-open path {
    fill: var(--color-secondary) !important;
  }

  /* Optimisation tactile */
  .icon {
    -webkit-tap-highlight-color: transparent;
  }
</style>